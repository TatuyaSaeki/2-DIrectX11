//===========================================================================
//! @file	camera_tps.h
//!	@brief	三人称カメラ
//===========================================================================
#pragma once

//===========================================================================
//! @class CameraTPS
//===========================================================================
class CameraTPS : public Camera
{
public:
    //-----------------------------------------------------------------------
    //!	@name 初期化
    //-----------------------------------------------------------------------
    //@{

    //! @brief コンストラクタ
    CameraTPS();

    //! @brief デストラクタ
    virtual ~CameraTPS() override = default;

	//@}
    //-----------------------------------------------------------------------
    //!	@name タスク
    //-----------------------------------------------------------------------
    //@{

	//-----------------------------------------------------------------------
    //! @brief 初期化
	//! @return true  正常終了
	//! @return false エラー終了
	//-----------------------------------------------------------------------
    virtual bool initialize() override;

    //! @brief 更新
    virtual void update() override;

    //! @brief 解放
    virtual void cleanup() override;

	//@}
    //-----------------------------------------------------------------------
    //!	@name 設定
    //-----------------------------------------------------------------------
    //@{

	//-----------------------------------------------------------------------
    //! @brief 注視点にするオブジェクト設定
	//! @param [in] target 注視点にしたいオブジェクト
	//-----------------------------------------------------------------------
    void setTarget(ObjectBase* const target);

    //@}

private:
    Vector2 oldPoint_ = Vector2::ZERO;   //!< 1フレーム前の位置
    f32     length_   = 0.0f;            //!< オブジェクトから離す距離
    Vector3 offset_   = Vector3::ZERO;   //!<

    std::shared_ptr<ObjectBase> target_;   //!< 注視点にするオブジェクト
};